<%= form_with url: search_path do |form| %>
  <%= form.text_field :name,
        class: 'p-0',
        placeholder: 'タスク名で絞り込み',
        style: 'font-size: 12px; border: none; padding: 0 4px; margin: 0 8px;',
        id: 'search-input',
        onblur: @submit
  %>

  <%= form.submit '', id: 'search-submit' %>
<% end %>

<script>
  document.getElementById('search-input').addEventListener('input', event => {
    if (event.isComposing) return;
    <%= @submit %>
  })

  document.getElementById('search-input').addEventListener('compositionend', () => {
    <%= @submit %>
  });
</script>
