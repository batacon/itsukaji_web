<%= form_with url: search_path do |form| %>
  <%= form.text_field :name,
        class: 'text-xs border-none w-11/12',
        placeholder: 'タスク名で絞り込み',
        id: 'search-input',
        onblur: 'searchSubmit()'
  %>

  <%= form.submit '', id: 'search-submit' %>
<% end %>

<script>
  document.getElementById('search-input').addEventListener('input', event => {
    if (event.isComposing) return;
    searchSubmit();
  })

  document.getElementById('search-input').addEventListener('compositionend', () => {
    searchSubmit();
  });

  function searchSubmit() {
    document.getElementById("search-submit").click();
  }
</script>
